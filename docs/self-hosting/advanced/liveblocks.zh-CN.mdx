---
title: LobeChat Liveblocks 同步配置指南
description: 在 LobeChat 中实现基于 WebRTC 和 YJS 的设备间实时数据同步。了解如何配置 WebRTC 并开启同步功能，以及使用局限性和已知问题。
tags:
  - Liveblocks
  - 客户端同步
---

# 在 LobeChat 中使用 Liveblocks 客户端同步

## Liveblocks 简介

[Liveblocks](https://liveblocks.io) 是一个提供实时协作和数据同步的服务。在 LobeChat 中，我们成功整合了 Liveblocks，以提升设备间的离线数据同步能力，无需像 WebRTC 方案一样需要多个客户端同时在线。

## 配置 Liveblocks 并实现同步

要使用 LobeChat 的 Liveblocks 同步功能,需要完成以下步骤:

<Steps>

### 获取 Liveblocks 项目 API Key

首先，你需要注册一个 Liveblocks 账户并登入 [管理面板](https://liveblocks.io/dashboard/)

选择或新建一个生产环境项目，进入项目详情，点击侧边栏的 API Key，获取你的项目 Secret Key

<Image
  alt={'获取 Liveblocks API Key'}
  inStep
  src={'https://github.com/user-attachments/assets/94c97c2b-c271-4c77-8038-02b42934fd88'}
/>

### 在部署实例中开启 Liveblocks 同步

LobeChat 默认隐藏了 Liveblocks 同步功能，需要通过添加环境变量 `FEATURE_FLAGS=+liveblocks_sync` 来开启 Liveblocks 同步功能。

同时，你需要添加 `LIVEBLOCKS_SECRET_KEY` 环境变量，值为 Liveblocks 项目的 Secret Key。如此环境变量没有配置，则用户需要提供自行注册的 Public Key，来使用自己的 Liveblocks 项目。

<Callout type={'warning'}>
  由于 WebRTC 同步功能已经在 [PR 3182](https://github.com/lobehub/lobe-chat/pull/3182) 中归档
  虽然 Liveblocks 可以与 WebRTC 同步同时使用，但只建议启用其中一个同步功能。
</Callout>

### 配置 LobeChat 的 Liveblocks 同步设置

根据部署时的配置不同，Liveblocks 同步设置也有所区别：

- 整合身份验证：如已启用 LobeChat 的身份验证服务，登录账号后直接启用即可，默认的同步房间会与你的账户绑定，无需额外配置。
- 启用单一访问密码：你需要额外设置同步房间名称
- 服务器没有配置 `LIVEBLOCKS_SECRET_KEY`：除了房间名称外，用户还需要自行配置 Liveblocks 项目的 Public Key

除此之外，你可以在界面中额外设置房间密码，以加密房间名称，若密码不正确，则其他客户端无法进入房间并同步数据。

<Image
  alt={'配置 Liveblocks 同步'}
  inStep
  src={'https://github.com/user-attachments/assets/e0c50e17-c666-4028-bafb-24eb20732be2'}
/>

</Steps>

## 使用限制

Liveblocks 的免费服务仅为每个同步房间提供 10MB 的储存空间（约 7000 条信息及 1600 个话题）， 同时支持 10 个客户端同时在线。

关于 Liveblocks 的更多限制请阅读 [公平使用原则](https://liveblocks.io/docs/platform/limits/fair-use-policy)

## 我们的建议

鉴于 Liveblocks 存在限制，且数据存放在第三方服务上，我们建议只将它用于小规模的团队或个人，作为备份储存方案使用。

LobeChat 1.0 发布了更稳定、更用户友好的服务端数据库同步方案（[部署指南](/zh/docs/self-hosting/advanced/server-database)），我们建议用户优先考虑使用服务端数据库同步方案。
